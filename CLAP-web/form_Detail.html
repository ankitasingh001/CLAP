<!DOCTYPE html>
<!--
	Interphase by TEMPLATED
	templated.co @templatedco
	Released for free under the Creative Commons Attribution 3.0 license (templated.co/license)
-->
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<title>CLAP </title>
		<meta http-equiv="content-type" content="text/html; charset=utf-8" />
		<meta name="description" content="" />
		<meta name="keywords" content="" />
		<!--[if lte IE 8]><script src="css/ie/html5shiv.js"></script><![endif]-->
		<script src="js/jquery.min.js"></script>
		<script src="js/skel.min.js"></script>
		<script src="js/skel-layers.min.js"></script>
		<script src="js/init.js"></script>
		<noscript>
			<link rel="stylesheet" href="css/skel.css" />
			<link rel="stylesheet" href="css/style.css" />
			<link rel="stylesheet" href="css/style-xlarge.css" />
		</noscript>
		<!--[if lte IE 8]><link rel="stylesheet" href="css/ie/v8.css" /><![endif]-->
	</head>
	<body >

		<!-- Header -->
			<header id="header">
				<h1><a href="index.html">CLAP</a></h1>
				<nav id="nav">  
					<ul>
						<li><a href="index.html">Home</a></li>
						<li><a href="about.html">About</a></li>
						<li><a href="downloads.html">Downloads</a></li>
						<li><a href="offers.html">Offers</a></li>
					</ul>
				</nav>
			</header>

						<section id="main" class="wrapper">
				<div class="container">
							<h3>Enter the following details:</h3>
							<p>Download links will show up after successfull submission of the form</p>
							<form method="post" action="#">
								<div class="row uniform 50%">
									<div class="6u 12u$(xsmall)">
										<input type="text" name="fullName" id="name" value="" placeholder="Full Name" />
									</div>
									<div class="6u$ 12u$(xsmall)">
										<input type="email" name="email" id="email" value="" placeholder="Email" />
									</div>
									<div class="6u 12u$(xsmall)">
										<input type="text" name="occupation" id="name" value="" placeholder="Occupation" />
									</div>
									<div class="6u$ 12u$(xsmall)">
										<input type="email" name="affiliation" id="email" value="" placeholder="Affiliation" />
									</div>
				
									<div class="12u$">
										<textarea name="purpose" id="message" placeholder="Purpose of downloading the dataset" rows="6"></textarea>
									</div>
									<div class="12u$">
										<textarea name="address" id="address" placeholder="Address" rows="6"></textarea>
									</div>
									<div class="12u$">
										<ul class="actions">
											<li><input type="submit" value="Send Message" class="special" /></li>
											<li><input type="reset" value="Reset" /></li>
										</ul>
									</div>
								</div>
							</form>
						</div>
						</section>

<section id="one" class="wrapper style2 ">
  <div class="container">
<form name="Data_download_record">

  <input name="email" type="email" placeholder="Email" required>
  <input name="fullName" type="text" placeholder="Full Name" required>
  <input name="occupation" type="text" placeholder="Occupation" required>
  <input name="affiliation" type="text" placeholder="Affiliation" required>
  <input name="purpose" type="text" placeholder="Purpose" required>
  <input name="address" type="text" placeholder="Address" required>
  <button type="submit" class ="button">Submit</button>
</form>

    <div class="loading js-loading is-hidden">
      <div class="loading-spinner">
        <svg><circle cx="25" cy="25" r="20" fill="none" stroke-width="2" stroke-miterlimit="10"/></svg>
      </div>
    </div>

    <p class="js-success-message is-hidden">Success!</p>
    <p class="js-error-message is-hidden">Error!</p>
  </div>

	</section>
		<!-- Footer -->
			<footer id="footer">
				<div class="container">
					<div class="row">
						<section class="4u 6u(medium) 12u$(small)">
							<h3>Kameswari Chebrolu</h3>
							<ul class="tabular">
								<li>
									<h3>Address</h3>
									Room no. SIA-402, 4th floor, Kanwal Rekhi Building<br>
									IIT Bombay, Mumbai-400076
								</li>
								<li>
									<h3>Mail</h3>
									<a href="#"> chebrolu@iitb.ac.in</a>
								</li>
								<li>
									<h3>Phone</h3>
									+91-22-2576-7976
								</li>
							</ul>
						</section>
						<section class="4u 6u$(medium) 12u$(small)">
							<h3></h3>
							<p></p>
							<ul class="alt">
							
							</ul>
						</section>
						<section class="4u$ 12u$(medium) 12u$(small)">
							<h3>Preethi Jyothi</h3>
							<ul class="tabular">
								<li>
									<h3>Address</h3>
									Room 221, new CSE bldg <br>
									IIT Bombay, Mumbai 400076
								</li>
								<li>
									<h3>Mail</h3>
									<a href="#">pjyothi@cse.iitb.ac.in</a>
								</li>
								<li>
									<h3>Phone</h3>
									+91-22-2576-7736
								</li>
							</ul>
						</section>
					</div>
					<ul class="copyright">
						<li>&copy; CLAP All rights reserved.</li>
						<li>Design: <a href="http://templated.co">TEMPLATED</a></li>
						<li>For technical queries contact : ankitasingh@cse.iitb.ac.in</li>
					</ul>
				</div>
			</footer>

	</body>

  <script>
    const scriptURL = 'https://script.google.com/macros/s/AKfycbzeRHyIzIXHPWmcvYkPdU5qDQ_Xjvo-TzTize-7o-FlPWq78nVs/exec'
    const form = document.forms['Data_download_record']
    const loading = document.querySelector('.js-loading')
    const successMessage = document.querySelector('.js-success-message')
    const errorMessage = document.querySelector('.js-error-message')

    form.addEventListener('submit', e => {
      e.preventDefault()
      showLoadingIndicator()
      fetch(scriptURL, { method: 'POST', body: new FormData(form)})
        .then(response => showSuccessMessage(response))
        .catch(error => showErrorMessage(error))
    })

    function showLoadingIndicator () {
      form.classList.add('is-hidden')
      loading.classList.remove('is-hidden')
    }

    function showSuccessMessage (response) {
	  
     window.location.replace("downloads.html");
    }

    function showErrorMessage (error) {
      console.error('Error!', error.message)
      setTimeout(() => {
        errorMessage.classList.remove('is-hidden')
        loading.classList.add('is-hidden')
      }, 500)
    }
  </script>
</html>